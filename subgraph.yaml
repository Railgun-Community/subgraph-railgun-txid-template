specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: RailgunSmartWallet
    network: mainnet
    source:
      abi: RailgunSmartWallet
      address: "0xfa7093cdd9ee6932b4eb2c9e1cde7ce00b1fa4b9"
      startBlock: 14737691
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Token
        - CommitmentPreimage
        - Commitment
        - Unshield
      abis:
        - name: RailgunSmartWallet
          file: ./abis/RailgunSmartWallet.json
      eventHandlers:
        - event: Nullifiers(uint256,uint256[])
          handler: handleNullifiers
        - event: CommitmentBatch(uint256,uint256,uint256[],(uint256[4],uint256[2],uint256[])[])
          handler: handleCommitmentBatch
        - event: GeneratedCommitmentBatch(uint256,uint256,(uint256,(uint8,address,uint256),uint120)[],uint256[2][])
          handler: handleGeneratedCommitmentBatch
        - event: Nullified(uint16,bytes32[])
          handler: handleNullified
        - event: Transact(uint256,uint256,bytes32[],(bytes32[4],bytes32,bytes32,bytes,bytes)[])
          handler: handleTransact
        - event: Unshield(address,(uint8,address,uint256),uint256,uint256)
          handler: handleUnshield
        - event: Shield(uint256,uint256,(bytes32,(uint8,address,uint256),uint120)[],(bytes32[3],bytes32)[])
          handler: handleShieldLegacyPreMar23
        - event: Shield(uint256,uint256,(bytes32,(uint8,address,uint256),uint120)[],(bytes32[3],bytes32)[],uint256[])
          handler: handleShield
      file: ./src/railgun-smart-wallet.ts
  - kind: ethereum
    name: PoseidonT4
    network: mainnet
    source:
      abi: PoseidonT4
      address: "0xcb2ebd9fcb570db7b4f723461efce7e1f3b5b5a3"
    mapping:
      kind: ethereum/contract
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - NullEntity
      abis:
        - name: PoseidonT4
          file: ./abis/PoseidonT4.json
      eventHandlers:
        - event: NullEvent()
          handler: handleNullEvent
      file: ./src/poseidon.ts
